<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>v2.6.5-FIXED-20260205 æµ‹è¯•é¡µé¢</title>
    <!-- MathJax -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body {
            font-family: "Microsoft YaHei", Arial, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        .test-box {
            background: white;
            padding: 25px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status {
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .formula-box {
            background: #f8f9fa;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #667eea;
            border-radius: 5px;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #d63384;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ§ª v2.6.5-FIXED-20260205 ç‰ˆæœ¬æµ‹è¯•</h1>
        <p>å¿«é€ŸéªŒè¯LaTeXå…¬å¼å’Œç‰ˆæœ¬åŠ è½½</p>
    </div>

    <div class="test-box">
        <h2>ğŸ“‹ æµ‹è¯•æ­¥éª¤</h2>
        <ol>
            <li>é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•æ–‡ä»¶åŠ è½½å’Œå…¬å¼æ¸²æŸ“</li>
            <li>æ£€æŸ¥ç‰ˆæœ¬å·ã€å†…å®¹é•¿åº¦ã€LaTeXå…¬å¼</li>
            <li>ç»“æœä¼šæ˜¾ç¤ºåœ¨ä¸‹æ–¹</li>
        </ol>
        <div id="test-results"></div>
    </div>

    <div class="test-box">
        <h2>ğŸ“Š ç‰ˆæœ¬ä¿¡æ¯</h2>
        <div id="version-info"></div>
    </div>

    <div class="test-box">
        <h2>ğŸ§® LaTeX å…¬å¼æµ‹è¯•</h2>
        <div class="formula-box">
            <h3>æµ‹è¯•1: é¢„åŠ é‡æ¯”è®¡ç®—å…¬å¼</h3>
            <p id="formula1">$De-emphasis (dB) = 20 \times \log_{10}\left(\frac{V_{low}}{V_{high}}\right)$</p>
        </div>

        <div class="formula-box">
            <h3>æµ‹è¯•2: æ€»æŠ–åŠ¨è®¡ç®—</h3>
            <p id="formula2">$TJ = DJ + n \times RJ$</p>
        </div>

        <div class="formula-box">
            <h3>æµ‹è¯•3: BERè®¡ç®—</h3>
            <p id="formula3">$BER = \frac{\text{é”™è¯¯æ¯”ç‰¹æ•°}}{\text{æ€»æ¯”ç‰¹æ•°}}$</p>
        </div>

        <div class="formula-box">
            <h3>æµ‹è¯•4: CTLEé¢‘ç‡å“åº”</h3>
            <p id="formula4">$H_{CTLE}(f) = \frac{1 + j \cdot \frac{f}{f_{z}}}{1 + j \cdot \frac{f}{f_{p}}}$</p>
        </div>

        <div id="formula-results"></div>
    </div>

    <div class="test-box">
        <h2>ğŸ” ä» high-speed-deep-dive-20260205-fixed.js åŠ è½½çš„å®é™…å†…å®¹</h2>
        <div id="actual-content"></div>
    </div>

    <!-- åŠ è½½æ–°ç‰ˆæœ¬æ–‡ä»¶ -->
    <script>
        const timestamp = new Date().getTime();
        const random = Math.random().toString(36).substring(7);
        const script = document.createElement('script');
        script.src = `high-speed-deep-dive-20260205-fixed.js?t=${timestamp}&r=${random}`;
        script.onload = function() {
            console.log('âœ… high-speed-deep-dive-20260205-fixed.js åŠ è½½å®Œæˆ');
            runTests();
        };
        script.onerror = function() {
            console.error('âŒ æ–‡ä»¶åŠ è½½å¤±è´¥');
            document.getElementById('test-results').innerHTML = '<div class="status error">âŒ æ–‡ä»¶åŠ è½½å¤±è´¥ï¼</div>';
        };
        document.head.appendChild(script);
    </script>

    <script>
        function runTests() {
            const resultsDiv = document.getElementById('test-results');
            const versionDiv = document.getElementById('version-info');
            const actualDiv = document.getElementById('actual-content');

            let html = '<h3>ğŸ” æµ‹è¯•ç»“æœ</h3>';

            // æµ‹è¯•1: æ£€æŸ¥å¯¹è±¡æ˜¯å¦å­˜åœ¨
            if (typeof highSpeedDeepDive !== 'undefined') {
                html += '<div class="status success">âœ… highSpeedDeepDive å¯¹è±¡å·²åŠ è½½</div>';

                // æµ‹è¯•2: æ£€æŸ¥ pcieTestingDeepDive
                if (highSpeedDeepDive.pcieTestingDeepDive) {
                    html += '<div class="status success">âœ… pcieTestingDeepDive å±æ€§å­˜åœ¨</div>';

                    // æµ‹è¯•3: æ£€æŸ¥ content
                    if (highSpeedDeepDive.pcieTestingDeepDive.content) {
                        const contentLength = highSpeedDeepDive.pcieTestingDeepDive.content.length;
                        html += `<div class="status ${contentLength > 100000 ? 'success' : 'error'}">`;
                        html += contentLength > 100000 ? 'âœ…' : 'âŒ';
                        html += ` å†…å®¹é•¿åº¦: <code>${contentLength}</code> å­—ç¬¦</div>`;

                        if (contentLength > 100000) {
                            html += '<div class="status success">ğŸ‰ ç‰ˆæœ¬æ­£ç¡®ï¼LaTeXå…¬å¼åº”è¯¥å·²ä¿®å¤</div>';
                        } else {
                            html += '<div class="status error">âš ï¸  å†…å®¹é•¿åº¦å¼‚å¸¸ï¼Œå¯èƒ½ä»æ˜¯æ—§ç‰ˆæœ¬</div>';
                        }

                        // æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
                        versionDiv.innerHTML = `
                            <div class="info">
                                <p><strong>æ ‡é¢˜:</strong> ${highSpeedDeepDive.pcieTestingDeepDive.title || 'N/A'}</p>
                                <p><strong>å›¾æ ‡:</strong> ${highSpeedDeepDive.pcieTestingDeepDive.icon || 'N/A'}</p>
                                <p><strong>å†…å®¹é•¿åº¦:</strong> <code>${contentLength}</code> å­—ç¬¦</p>
                                <p><strong>é¢„æœŸé•¿åº¦:</strong> <code>313000+</code> å­—ç¬¦</p>
                            </div>
                        `;

                        // æå–å¹¶æ˜¾ç¤ºå®é™…çš„é¢„åŠ é‡å…¬å¼
                        const match = highSpeedDeepDive.pcieTestingDeepDive.content.match(/De-emphasis[^$]*\$([^$]+)\$/);
                        if (match) {
                            actualDiv.innerHTML = `
                                <div class="formula-box">
                                    <h3>ä»æ–‡ä»¶ä¸­æå–çš„é¢„åŠ é‡å…¬å¼ï¼š</h3>
                                    <p>$${match[1]}$</p>
                                    <hr>
                                    <p><strong>åŸå§‹LaTeXä»£ç ï¼š</strong></p>
                                    <pre>${match[1]}</pre>
                                    <p><strong>æ£€æŸ¥è¦ç‚¹ï¼š</strong></p>
                                    <ul>
                                        <li>åŒ…å« <code>\\times</code>: ${match[1].includes('\\times') ? 'âœ… æ˜¯' : 'âŒ å¦'}</li>
                                        <li>åŒ…å« <code>\\log</code>: ${match[1].includes('\\log') ? 'âœ… æ˜¯' : 'âŒ å¦'}</li>
                                        <li>åŒ…å« <code>\\frac</code>: ${match[1].includes('\\frac') ? 'âœ… æ˜¯' : 'âŒ å¦'}</li>
                                        <li>åŒ…å« <code>\\left</code> å’Œ <code>\\right</code>: ${match[1].includes('\\left') && match[1].includes('\\right') ? 'âœ… æ˜¯' : 'âŒ å¦'}</li>
                                    </ul>
                                </div>
                            `;
                        }
                    } else {
                        html += '<div class="status error">âŒ pcieTestingDeepDive.content ä¸å­˜åœ¨</div>';
                    }
                } else {
                    html += '<div class="status error">âŒ pcieTestingDeepDive å±æ€§ä¸å­˜åœ¨</div>';
                }
            } else {
                html += '<div class="status error">âŒ highSpeedDeepDive å¯¹è±¡æœªå®šä¹‰</div>';
            }

            resultsDiv.innerHTML = html;

            // ç­‰å¾…3ç§’åæ£€æŸ¥MathJaxæ¸²æŸ“
            setTimeout(checkFormulas, 3000);
        }

        function checkFormulas() {
            const formulaResults = document.getElementById('formula-results');
            let html = '<h3>ğŸ” MathJax æ¸²æŸ“ç»“æœ</h3>';

            let successCount = 0;
            let errorCount = 0;

            for (let i = 1; i <= 4; i++) {
                const el = document.getElementById('formula' + i);
                const hasError = el.textContent.includes('Math input error');

                if (hasError) {
                    html += `<div class="status error">âŒ æµ‹è¯•${i} å¤±è´¥: Math input error</div>`;
                    errorCount++;
                } else {
                    html += `<div class="status success">âœ… æµ‹è¯•${i} æˆåŠŸ</div>`;
                    successCount++;
                }
            }

            html += `<div class="status info">ğŸ“Š æ€»ç»“: ${successCount}/${successCount + errorCount} ä¸ªå…¬å¼æ¸²æŸ“æˆåŠŸ</div>`;

            if (errorCount === 0) {
                html += '<div class="status success">ğŸ‰ æ‰€æœ‰å…¬å¼æ¸²æŸ“æˆåŠŸï¼é—®é¢˜å·²è§£å†³ï¼</div>';
            }

            formulaResults.innerHTML = html;
        }

        // æ§åˆ¶å°æ—¥å¿—
        console.log('=== v2.6.5-FIXED-20260205 æµ‹è¯•é¡µé¢ ===');
        console.log('ç­‰å¾…æ–‡ä»¶åŠ è½½...');
    </script>
</body>
</html>
