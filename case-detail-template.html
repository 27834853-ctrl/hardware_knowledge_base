<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="硬件设计案例详情 - 完整的设计流程、原理图、PCB布局和测试验证">

    <title>案例详情 - 硬件工程师知识库</title>

    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Case Detail Specific Styles */
        .case-detail-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 0 40px;
        }

        .case-detail-header {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .case-breadcrumb {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 14px;
            opacity: 0.9;
        }

        .case-breadcrumb a {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s;
        }

        .case-breadcrumb a:hover {
            opacity: 0.7;
        }

        .case-title-section {
            display: flex;
            gap: 30px;
            align-items: flex-start;
        }

        .case-icon-large {
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
        }

        .case-meta {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
        }

        .case-detail-content {
            max-width: 1000px;
            margin: -30px auto 60px;
            padding: 0 20px;
        }

        .content-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 40px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 30px;
        }

        .content-card h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
        }

        .content-card h3 {
            color: var(--text-color);
            margin-top: 30px;
            margin-bottom: 15px;
        }

        .spec-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .spec-item {
            padding: 15px;
            background: var(--bg-light);
            border-radius: var(--radius-md);
            border-left: 4px solid var(--primary-color);
        }

        .spec-label {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .spec-value {
            color: var(--text-color);
        }

        .image-placeholder {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: var(--radius-md);
            padding: 60px 20px;
            text-align: center;
            color: #666;
            margin: 20px 0;
        }

        .image-placeholder i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .step-list {
            counter-reset: step-counter;
            list-style: none;
            padding: 0;
        }

        .step-list li {
            counter-increment: step-counter;
            position: relative;
            padding-left: 60px;
            margin-bottom: 30px;
        }

        .step-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
        }

        .highlight-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            border-radius: var(--radius-md);
            margin: 20px 0;
        }

        .highlight-box h4 {
            color: #856404;
            margin-top: 0;
            margin-bottom: 10px;
        }

        .code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: var(--radius-md);
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }

        .download-section {
            background: var(--bg-light);
            padding: 30px;
            border-radius: var(--radius-lg);
            text-align: center;
            margin-top: 40px;
        }

        .download-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 30px;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: var(--radius-md);
            transition: all 0.3s;
        }

        .download-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .related-cases {
            margin-top: 40px;
        }

        .related-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .case-title-section {
                flex-direction: column;
            }

            .case-icon-large {
                width: 80px;
                height: 80px;
                font-size: 36px;
            }

            .content-card {
                padding: 20px;
            }

            .download-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-microchip"></i>
                <span>硬件工程师知识库</span>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html" class="nav-link"><i class="fas fa-home"></i> 首页</a></li>
                <li><a href="cases.html" class="nav-link"><i class="fas fa-briefcase"></i> 案例库</a></li>
                <li><a href="index.html#tools" class="nav-link"><i class="fas fa-calculator"></i> 工具箱</a></li>
                <li><button id="themeToggle" class="theme-toggle"><i class="fas fa-moon"></i></button></li>
            </ul>
            <div class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Case Detail Hero -->
    <section class="case-detail-hero">
        <div class="case-detail-header">
            <div class="case-breadcrumb">
                <a href="index.html"><i class="fas fa-home"></i> 首页</a>
                <span>/</span>
                <a href="cases.html">案例库</a>
                <span>/</span>
                <span>案例详情</span>
            </div>

            <div class="case-title-section">
                <div class="case-icon-large">
                    <i class="fas fa-microchip"></i>
                </div>
                <div>
                    <h1>STM32F103最小系统设计</h1>
                    <p style="margin-top: 10px; opacity: 0.9;">完整的STM32最小系统电路设计，适合学习MCU系统架构</p>
                    <div class="case-meta">
                        <div class="meta-item">
                            <i class="fas fa-tag"></i>
                            <span>MCU设计</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-signal"></i>
                            <span>入门级</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-layer-group"></i>
                            <span>4层板</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-clock"></i>
                            <span>2-3小时</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-user"></i>
                            <span>5.2k学习</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Case Detail Content -->
    <div class="case-detail-content">
        <!-- Overview -->
        <div class="content-card">
            <h2><i class="fas fa-info-circle"></i> 项目概述</h2>
            <p>本案例展示如何设计一个完整的STM32F103C8T6最小系统。最小系统是MCU应用的基础，包含了芯片正常工作所需的最基本电路，是学习嵌入式硬件设计的重要起点。</p>

            <h3>学习目标</h3>
            <ul>
                <li>理解MCU最小系统的组成部分</li>
                <li>掌握电源电路的设计要点</li>
                <li>学习时钟电路和复位电路的设计</li>
                <li>了解调试接口的配置</li>
                <li>掌握去耦电容的布局原则</li>
            </ul>
        </div>

        <!-- Technical Specifications -->
        <div class="content-card">
            <h2><i class="fas fa-cogs"></i> 技术规格</h2>

            <div class="spec-grid">
                <div class="spec-item">
                    <div class="spec-label">主控芯片</div>
                    <div class="spec-value">STM32F103C8T6</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">工作电压</div>
                    <div class="spec-value">3.3V</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">主频</div>
                    <div class="spec-value">72 MHz</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">Flash容量</div>
                    <div class="spec-value">64KB</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">SRAM容量</div>
                    <div class="spec-value">20KB</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">PCB层数</div>
                    <div class="spec-value">4层板</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">PCB尺寸</div>
                    <div class="spec-value">40mm × 30mm</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">调试接口</div>
                    <div class="spec-value">SWD</div>
                </div>
            </div>
        </div>

        <!-- Design Process -->
        <div class="content-card">
            <h2><i class="fas fa-project-diagram"></i> 设计流程</h2>

            <ol class="step-list">
                <li>
                    <h3>需求分析与规格定义</h3>
                    <p>确定系统功能需求，选择合适的STM32型号，规划接口和外设。</p>
                </li>
                <li>
                    <h3>电源系统设计</h3>
                    <p>设计3.3V电源电路，包括AMS1117-3.3稳压芯片、输入输出电容配置。</p>
                </li>
                <li>
                    <h3>时钟与复位电路</h3>
                    <p>配置8MHz外部晶振、负载电容，设计复位按键和复位电路。</p>
                </li>
                <li>
                    <h3>调试接口配置</h3>
                    <p>布置SWD调试接口（SWDIO、SWCLK），添加必要的上拉/下拉电阻。</p>
                </li>
                <li>
                    <h3>PCB布局布线</h3>
                    <p>按照信号完整性要求完成PCB设计，注意电源层、地层的完整性。</p>
                </li>
                <li>
                    <h3>DFM检查与制板</h3>
                    <p>进行可制造性设计检查，输出Gerber文件并发送制板。</p>
                </li>
                <li>
                    <h3>焊接与调试</h3>
                    <p>完成PCB焊接，上电测试，烧录测试程序验证功能。</p>
                </li>
            </ol>
        </div>

        <!-- Circuit Design -->
        <div class="content-card">
            <h2><i class="fas fa-drafting-compass"></i> 电路设计详解</h2>

            <h3>1. 电源电路</h3>
            <div class="image-placeholder">
                <i class="fas fa-image"></i>
                <p>电源电路原理图</p>
                <p style="font-size: 14px; opacity: 0.7;">(原理图示意：5V输入 → AMS1117-3.3 → 3.3V输出)</p>
            </div>

            <div class="spec-grid">
                <div class="spec-item">
                    <div class="spec-label">稳压芯片</div>
                    <div class="spec-value">AMS1117-3.3</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">输入电容</div>
                    <div class="spec-value">10μF钽电容</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">输出电容</div>
                    <div class="spec-value">22μF钽电容</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">最大输出电流</div>
                    <div class="spec-value">800mA</div>
                </div>
            </div>

            <div class="highlight-box">
                <h4><i class="fas fa-lightbulb"></i> 设计要点</h4>
                <ul>
                    <li>AMS1117需要至少1.5V的压差，输入电压建议≥5V</li>
                    <li>输出电容必须使用钽电容或低ESR电解电容</li>
                    <li>电源输入端添加防反接保护二极管</li>
                    <li>在MCU的每个电源引脚附近放置100nF去耦电容</li>
                </ul>
            </div>

            <h3>2. 时钟电路</h3>
            <div class="image-placeholder">
                <i class="fas fa-image"></i>
                <p>时钟电路原理图</p>
                <p style="font-size: 14px; opacity: 0.7;">(原理图示意：8MHz晶振 + 20pF负载电容)</p>
            </div>

            <div class="spec-grid">
                <div class="spec-item">
                    <div class="spec-label">外部晶振</div>
                    <div class="spec-value">8MHz无源晶振</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">负载电容</div>
                    <div class="spec-value">20pF × 2</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">晶振精度</div>
                    <div class="spec-value">±20ppm</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">倍频后主频</div>
                    <div class="spec-value">72MHz</div>
                </div>
            </div>

            <h3>3. 复位电路</h3>
            <p>STM32内部集成了上电复位和掉电复位，外部只需添加复位按键即可：</p>
            <ul>
                <li>NRST引脚通过10kΩ电阻上拉到3.3V</li>
                <li>复位按键连接NRST到GND</li>
                <li>NRST附近添加100nF滤波电容，防止误触发</li>
            </ul>

            <h3>4. 调试接口</h3>
            <div class="spec-grid">
                <div class="spec-item">
                    <div class="spec-label">接口类型</div>
                    <div class="spec-value">SWD (4线)</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">SWDIO</div>
                    <div class="spec-value">PA13</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">SWCLK</div>
                    <div class="spec-value">PA14</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">接口封装</div>
                    <div class="spec-value">2.54mm排针</div>
                </div>
            </div>
        </div>

        <!-- PCB Layout -->
        <div class="content-card">
            <h2><i class="fas fa-th"></i> PCB布局布线</h2>

            <h3>层叠结构</h3>
            <div class="code-block">
第1层：顶层信号层 (Top Layer)
第2层：地平面层 (GND Plane)
第3层：电源平面层 (3.3V Power Plane)
第4层：底层信号层 (Bottom Layer)
            </div>

            <h3>布局原则</h3>
            <ol>
                <li><strong>电源优先</strong>：稳压芯片靠近电源输入端</li>
                <li><strong>就近布局</strong>：去耦电容靠近MCU电源引脚</li>
                <li><strong>功能分区</strong>：电源区、MCU核心区、接口区分开</li>
                <li><strong>地层完整</strong>：避免分割地平面</li>
            </ol>

            <div class="image-placeholder">
                <i class="fas fa-image"></i>
                <p>PCB布局示意图</p>
                <p style="font-size: 14px; opacity: 0.7;">(顶层：电源输入 → 稳压电路 → MCU → 调试接口)</p>
            </div>

            <h3>关键布线</h3>
            <div class="highlight-box">
                <h4><i class="fas fa-route"></i> 布线要点</h4>
                <ul>
                    <li><strong>电源线</strong>：3.3V主电源线宽≥0.5mm，去耦电容就近走线</li>
                    <li><strong>晶振</strong>：OSC_IN/OUT走线尽可能短，周围敷铜接地形成屏蔽</li>
                    <li><strong>SWD接口</strong>：SWDIO/SWCLK等长，长度≤10cm，阻抗50Ω</li>
                    <li><strong>地连接</strong>：多点打过孔连接顶层地和地平面</li>
                </ul>
            </div>
        </div>

        <!-- Testing & Verification -->
        <div class="content-card">
            <h2><i class="fas fa-vial"></i> 测试验证</h2>

            <h3>1. 上电测试</h3>
            <ol>
                <li>目视检查：检查焊接质量，无短路、虚焊</li>
                <li>电源测试：用万用表测量3.3V输出电压</li>
                <li>电流测试：测量静态电流（应＜50mA）</li>
            </ol>

            <h3>2. 调试器连接测试</h3>
            <ol>
                <li>连接ST-Link调试器到SWD接口</li>
                <li>打开STM32 ST-LINK Utility识别芯片</li>
                <li>读取芯片ID，确认通信正常</li>
            </ol>

            <h3>3. 功能验证</h3>
            <div class="code-block">
// LED闪烁测试程序
void LED_Blink_Test(void) {
    GPIO_InitTypeDef GPIO_InitStructure;

    // 使能GPIOC时钟
    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC, ENABLE);

    // 配置PC13为推挽输出
    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_13;
    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
    GPIO_Init(GPIOC, &GPIO_InitStructure);

    // LED闪烁循环
    while(1) {
        GPIO_SetBits(GPIOC, GPIO_Pin_13);    // LED亮
        Delay_ms(500);
        GPIO_ResetBits(GPIOC, GPIO_Pin_13); // LED灭
        Delay_ms(500);
    }
}
            </div>

            <h3>测试结果</h3>
            <div class="spec-grid">
                <div class="spec-item">
                    <div class="spec-label">电源电压</div>
                    <div class="spec-value">3.29V ✓</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">静态电流</div>
                    <div class="spec-value">28mA ✓</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">芯片识别</div>
                    <div class="spec-value">正常 ✓</div>
                </div>
                <div class="spec-item">
                    <div class="spec-label">程序下载</div>
                    <div class="spec-value">成功 ✓</div>
                </div>
            </div>
        </div>

        <!-- Key Takeaways -->
        <div class="content-card">
            <h2><i class="fas fa-star"></i> 设计总结</h2>

            <h3>核心要点</h3>
            <ul>
                <li>✅ 电源稳定性是系统正常工作的基础，去耦电容布局至关重要</li>
                <li>✅ 晶振电路要短且要有良好的地屏蔽</li>
                <li>✅ 4层板设计能提供更好的电源和地平面完整性</li>
                <li>✅ 预留充足的测试点和调试接口便于后期调试</li>
            </ul>

            <h3>常见问题</h3>
            <div class="highlight-box">
                <h4><i class="fas fa-exclamation-triangle"></i> 问题：芯片无法识别</h4>
                <p><strong>可能原因：</strong></p>
                <ul>
                    <li>NRST引脚未上拉或被拉低</li>
                    <li>SWDIO/SWCLK接线错误</li>
                    <li>电源电压不足或不稳定</li>
                </ul>
                <p><strong>解决方案：</strong></p>
                <ul>
                    <li>检查NRST引脚电压应为3.3V</li>
                    <li>用万用表蜂鸣档检查SWD接口连接</li>
                    <li>示波器检查3.3V电源纹波</li>
                </ul>
            </div>
        </div>

        <!-- Download Section -->
        <div class="content-card">
            <div class="download-section">
                <h2><i class="fas fa-download"></i> 资料下载</h2>
                <p>下载完整的设计文件，包含原理图、PCB文件和测试代码</p>
                <div class="download-buttons">
                    <a href="#" class="download-btn">
                        <i class="fas fa-file-pdf"></i>
                        <span>原理图 PDF</span>
                    </a>
                    <a href="#" class="download-btn">
                        <i class="fas fa-file-archive"></i>
                        <span>PCB源文件</span>
                    </a>
                    <a href="#" class="download-btn">
                        <i class="fas fa-file-code"></i>
                        <span>测试代码</span>
                    </a>
                    <a href="#" class="download-btn">
                        <i class="fas fa-file-alt"></i>
                        <span>BOM清单</span>
                    </a>
                </div>
                <p style="margin-top: 15px; font-size: 14px; color: #666;">
                    注：文件下载功能开发中，即将上线
                </p>
            </div>
        </div>

        <!-- Related Cases -->
        <div class="content-card">
            <div class="related-cases">
                <h2><i class="fas fa-link"></i> 相关案例</h2>
                <div class="related-grid">
                    <div class="case-card" data-category="power" data-difficulty="beginner">
                        <div class="case-image">
                            <div class="case-badge beginner">入门</div>
                            <div class="case-icon"><i class="fas fa-battery-full"></i></div>
                        </div>
                        <div class="case-content">
                            <h3>Buck降压电路 (12V→5V)</h3>
                            <p class="case-description">2A输出的Buck降压电路设计</p>
                            <button onclick="window.location.href='cases.html'">查看详情</button>
                        </div>
                    </div>

                    <div class="case-card" data-category="communication" data-difficulty="intermediate">
                        <div class="case-image">
                            <div class="case-badge intermediate">中级</div>
                            <div class="case-icon"><i class="fas fa-ethernet"></i></div>
                        </div>
                        <div class="case-content">
                            <h3>SPI Flash存储器接口</h3>
                            <p class="case-description">W25Q128FV存储器电路设计</p>
                            <button onclick="window.location.href='cases.html'">查看详情</button>
                        </div>
                    </div>

                    <div class="case-card" data-category="sensor" data-difficulty="beginner">
                        <div class="case-image">
                            <div class="case-badge beginner">入门</div>
                            <div class="case-icon"><i class="fas fa-temperature-high"></i></div>
                        </div>
                        <div class="case-content">
                            <h3>DHT22温湿度传感器</h3>
                            <p class="case-description">数字温湿度传感器接口设计</p>
                            <button onclick="window.location.href='cases.html'">查看详情</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 硬件工程师知识库. All rights reserved. | <a href="https://github.com/27834853-ctrl/hardware_knowledge_base" target="_blank" style="color: white;">GitHub</a></p>
        </div>
    </footer>

    <!-- Back to Top -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="cases.js"></script>
</body>
</html>
